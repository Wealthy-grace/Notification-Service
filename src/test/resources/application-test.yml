spring:
  application:
    name: Notification-Service

  # H2 In-Memory Database for Tests
  datasource:
    url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1
    driver-class-name: org.h2.Driver
    username: sa
    password:

  # JPA Configuration
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: false
    open-in-view: false

  # Mail Configuration
  mail:
    host: localhost
    port: 1025
    username:
    password:
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false
            required: false

  # RabbitMQ Configuration
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual-host: /

  # Disable OAuth2 for Tests
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri:
          jwk-set-uri:

  # Cloud Configuration
  cloud:
    compatibility-verifier:
      enabled: false
    service-registry:
      auto-registration:
        enabled: false

# Server
server:
  port: 0

# RabbitMQ Queue Names
rabbitmq:
  queue:
    notification: notification.queue
    email: email.queue
    property-notification: property-notification.queue
    dlq: notification.dlq
  exchange:
    notification: notification.exchange
    dlx: notification.dlx
  routing-key:
    notification: notification.routing.key
    email: email.routing.key
    property-notification: property-notification.routing.key
    dlq: dlq.routing.key
  notification:
    max-retries: 3

# Application Configuration
app:
  email:
    from: test@test.com
    from-name: Test Service
    enabled: true
  services:
    property-service:
      url: http://localhost:8082
    user-service:
      url: http://localhost:8081
  notification:
    batch-size: 50
    retry-attempts: 3
    async-enabled: true

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always

# Logging
logging:
  level:
    root: INFO
    com.example.notificationservice: DEBUG
    org.springframework: WARN
    org.hibernate: WARN
    org.testcontainers: WARN